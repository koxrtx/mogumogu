div.search-container.flex.flex-col.items-center.justify-start.space-y-4.pt-6.px-4

  / é£²é£Ÿåº—æ¤œç´¢ã‚¨ãƒªã‚¢
  / ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆæ©Ÿèƒ½
  .relative.w-full.max-w-sm(
    data-controller="autocomplete"
    data-autocomplete-url-value="/search"
    data-autocomplete-query-param-value="q[name_or_address_cont]"
    data-autocomplete-min-length-value="2"
  )
    = search_form_for @q, url: spots_path, method: :get do |f|
      .flex.items-center.w-full.space-x-2
        = f.search_field :name_or_address_cont,
              placeholder: "åº—èˆ—åã€ä½æ‰€ã§æ¤œç´¢",
              class: "flex-1 px-4 py-3 border-2 border-pink-200 bg-white rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-300 focus:border-pink-300 text-gray-700 shadow-sm",
              data: { autocomplete_target: "input", action: "input->autocomplete#search"}
        / æ¤œç´¢ãƒœã‚¿ãƒ³
        = f.submit t('home.index.search_button'), class: "px-4 py-3 bg-gradient-to-r from-pink-300 to-pink-400 text-white font-bold rounded-lg hover:from-pink-400 hover:to-pink-500 transition-all duration-200 shadow-sm text-sm whitespace-nowrap"

      / --- è¨­å‚™ã‚¿ã‚°ï¼ˆbooleanæ¤œç´¢ï¼‰ ---
      .mt-4.bg-gradient-to-br.from-pink-50.to-pink-100.rounded-2xl.p-4.shadow-sm.border-2.border-pink-200
        h4.text-center.text-pink-700.font-bold.text-sm.mb-3.flex.items-center.justify-center
          span.mr-2 âœ¨
          | è¨­å‚™ã§çµã‚Šè¾¼ã‚€
          span.ml-2 âœ¨
        
        .grid.grid-cols-2.gap-3
          = render 'home/facility_checkbox', f: f, field: :child_chair_eq, label: 'ğŸª‘ å­ã©ã‚‚ã‚¤ã‚¹'
          = render 'home/facility_checkbox', f: f, field: :tatami_seat_eq, label: 'ğŸ¯ åº§æ•·ã‚ã‚Š'
          = render 'home/facility_checkbox', f: f, field: :child_tableware_eq, label: 'ğŸ½ï¸ å­ã©ã‚‚ç”¨é£Ÿå™¨'
          = render 'home/facility_checkbox', f: f, field: :bring_baby_food_eq, label: 'ğŸ¼ é›¢ä¹³é£ŸOK'
          = render 'home/facility_checkbox', f: f, field: :stroller_ok_eq, label: 'ğŸš¼ ãƒ™ãƒ“ãƒ¼ã‚«ãƒ¼OK'
          = render 'home/facility_checkbox', f: f, field: :child_menu_eq, label: 'ğŸ å­ã©ã‚‚ãƒ¡ãƒ‹ãƒ¥ãƒ¼'
          = render 'home/facility_checkbox', f: f, field: :parking_eq, label: 'ğŸš— é§è»Šå ´'
          = render 'home/facility_checkbox', f: f, field: :other_facility_eq, label: 'âœ¨ ãã®ä»–è¨­å‚™'
        
      / ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆçµæœè¡¨ç¤ºã‚¨ãƒªã‚¢
      ul.absolute.top-full.left-0.right-0.bg-white.border.border-pink-200.rounded-lg.shadow-lg.z-50.max-h-60.overflow-y-auto.hidden(
        data-autocomplete-target="results"
        )

  / æ¤œç´¢çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢
  .w-full.max-w-sm.px-2
    - if @spots&.any?
      .mb-4.text-center.bg-gradient-to-r.from-pink-100.to-pink-50.rounded-xl.p-4.shadow-md.border-2.border-pink-200
        h3.text-lg.font-bold.text-pink-700.flex.items-center.justify-center
          span.mr-2 ğŸ‰
          | æ¤œç´¢çµæœ:
          span.mx-2.text-2xl.text-pink-600 #{@spots.count}
          | ä»¶
          span.ml-2 ğŸ‰

      .space-y-3
        - @spots.each do |spot|
          = link_to spot_path(spot), class: "block border-2 border-pink-200 rounded-lg p-4 bg-white hover:bg-pink-50 hover:shadow-md cursor-pointer transition-all duration-200 shadow-sm" do
            h2.text-sm.font-bold.mb-2.text-pink-800 = spot.name
            p.text-xs.text-pink-600.mb-3.leading-relaxed = spot.address

            å­ã©ã‚‚è¨­å‚™æƒ…å ±
            .mt-2
              = render 'spots/child_facilities_tags', spot: spot

            - thumbnail_url = display_image_url(spot, size: :thumb, image_attribute: :images)
            - if thumbnail_url.present?
              .mt-3
                = image_tag thumbnail_url, class: "rounded-lg w-full h-32 object-cover border border-pink-200", alt: "#{spot.name}ã®ã‚µãƒ ãƒã‚¤ãƒ«", loading: "lazy"
            - else
              .mt-3.bg-pink-50.rounded-lg.border.border-pink-200.h-32.flex.items-center.justify-center style="border-style: dashed;"
                .text-center
                  / ç”»åƒæº–å‚™ä¸­
                  p.text-pink-400.text-xs = t('home.index.no_image')

    - elsif params[:q].present?
      .text-center.py-6.bg-white.shadow-sm.mt-4.rounded-lg.border.border-pink-200
        .mb-3
          p.text-pink-600.text-base.font-medium ã€Œ#{params[:q][:name_or_address_cont]}ã€ã®æ¤œç´¢çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ
          p.text-pink-400.text-sm.mt-2 åˆ¥ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢ã—ã¦ã¿ã¦ãã ã•ã„

  / ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢
  .space-y-3.w-full.max-w-sm.mt-6

    / ã“ã®ã‚¢ãƒ—ãƒªã®ä½¿ã„æ–¹ãƒœã‚¿ãƒ³
    = link_to "#usage-guide", class: "flex items-center justify-center w-full px-6 py-4 bg-gradient-to-r from-pink-300 to-pink-400 text-white font-bold rounded-lg hover:from-pink-400 hover:to-pink-500 shadow-md transition-all duration-200 active:scale-95" do
      / ã“ã®ã‚¢ãƒ—ãƒªã®ä½¿ã„æ–¹
      = t('home.index.how_to_use')

    / ç¾åœ¨åœ°ã‹ã‚‰æ¢ã™ãƒœã‚¿ãƒ³
    button#current-location-btn.flex.items-center.justify-center.w-full.px-6.py-4.rounded-lg.shadow-md.font-bold.border-2.border-pink-300.hover:bg-pink-100.bg-white.text-pink-700.transition-all.duration-200.active:scale-95
      / ç¾åœ¨åœ°ã‹ã‚‰æ¢ã™
      = t('home.index.search_by_location')

    / æŠ•ç¨¿ä¿ƒé€²ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¨ãƒªã‚¢
    - if current_user.present?
      .bg-gradient-to-r.from-pink-50.to-rose-50.rounded-lg.p-4.border-2.border-pink-200.shadow-sm.mb-4.text-center
        / ã‚ãªãŸã®ãŠã™ã™ã‚ã®ãŠåº—ã‚’å…±æœ‰ã—ã¾ã›ã‚“ã‹ï¼Ÿ
        h3.text-pink-700.font-bold.text-sm.mb-2 = t('home.index.share_promotion_title')
        p.text-pink-600.text-xs.leading-relaxed.px-2
          | å­é€£ã‚Œã§è¡Œã£ã¦è‰¯ã‹ã£ãŸãŠåº—ã®æƒ…å ±ã‚’æŠ•ç¨¿ã—ã¦
          br
          | ä»–ã®å®¶æ—ã‚’åŠ©ã‘ã¾ã—ã‚‡ã†
    
    / ãŠåº—ã®æŠ•ç¨¿ãƒœã‚¿ãƒ³
    - if current_user.present?
      = button_to new_spot_path, method: :get, class: "flex items-center justify-center w-full px-6 py-4 bg-gradient-to-r from-rose-300 to-rose-400 text-white font-bold rounded-lg hover:from-rose-400 hover:to-rose-500 shadow-md transition-all duration-200 active:scale-95" do
        / ãŠåº—ã®æŠ•ç¨¿
        = t('spots.buttons.new_spot')

  = render 'home/usage_guide'

  / ãƒ•ãƒƒã‚¿ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  .text-center.mt-8.pb-6
    / å­é€£ã‚Œã«å„ªã—ã„ãŠåº—ã‚’è¦‹ã¤ã‘ã‚ˆã†
    p.text-pink-400.text-xs.leading-relaxed = t('home.index.footer_message')