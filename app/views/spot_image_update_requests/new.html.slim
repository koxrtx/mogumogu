/ å†™çœŸä¿®æ­£ä¾é ¼ç”»é¢
.min-h-screen.bg-gradient-to-b.from-pink-50.to-pink-100.pb-8
  .container.mx-auto.px-4.py-6.max-w-full.sm:max-w-md
    / ãƒ˜ãƒƒãƒ€ãƒ¼éƒ¨åˆ†
    .bg-white.rounded-2xl.shadow-lg.p-6.mb-6
      h1.text-2xl.font-bold.mb-2.text-center.text-pink-600
        = t('spot_image_update_requests.new.title')
      
      .text-center
        = link_to spot_path(@spot),
            class: "inline-flex items-center text-pink-500 hover:text-pink-700 text-sm font-medium transition-colors" do
          svg.w-4.h-4.mr-1 xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
            path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"
          = t('spot_image_update_requests.new.back_to_spot')

    / ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    - if @request.errors.any?
      .bg-red-50.border-2.border-red-200.rounded-2xl.p-4.mb-6.shadow-md
        .flex.items-start
          svg.w-5.h-5.text-red-500.mt-0.5.mr-2 xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
            path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
          div
            h2.font-bold.text-red-700.mb-2 = t('spot_image_update_requests.errors.header')
            ul.list-disc.pl-5.text-red-600.text-sm
              - @request.errors.full_messages.each do |msg|
                li.mb-1= msg

    / ãƒ•ã‚©ãƒ¼ãƒ æœ¬ä½“
    .bg-white.rounded-2xl.shadow-lg.p-6
      = form_with model: [@spot, @request],
          local: true,
          html: { multipart: true, class: "space-y-6", data: { controller: "spot-image-limit", spot_image_limit_max_images_value: 3, spot_image_limit_current_count_value: @spot.images.count}} do |f|

        / ç¾åœ¨ã®ç”»åƒæšæ•°è¡¨ç¤º
        .bg-pink-50.rounded-xl.p-4.border-2.border-pink-200.text-center
          p.text-sm.text-gray-700
            span.font-bold.text-pink-600.text-lg = @spot.images.count
            span æš /
            span.font-bold.text-gray-600 3æš
          p.text-xs.text-gray-500.mt-1 ç¾åœ¨ã®ç™»éŒ²æšæ•°

        / ä¿®æ­£ã‚¿ã‚¤ãƒ—é¸æŠ
        .space-y-2
          label.block.text-sm.font-bold.text-gray-700.mb-2
            | ä¿®æ­£å†…å®¹ã‚’é¸ã‚“ã§ãã ã•ã„

          = f.select :request_type,
              [["é¸æŠã—ã¦ãã ã•ã„", ""], ["å†™çœŸã‚’è¿½åŠ  ", "add"], ["å†™çœŸã‚’å‰Šé™¤", "remove"], ["è¿½åŠ ï¼‹å‰Šé™¤", "both"]],
              {},
              class: "w-full px-4 py-3 border-2 border-pink-200 rounded-xl focus:border-pink-400 focus:ring focus:ring-pink-200 focus:ring-opacity-50 transition-all text-gray-700 bg-pink-50",
              data: { action: "change->spot-image-limit#changeType" }

        / è¿½åŠ ã‚¨ãƒªã‚¢
        .hidden.space-y-3 data-spot-image-limit-target="addField"
          .bg-pink-50.rounded-xl.p-4.border-2.border-dashed.border-pink-300
            label.block.text-sm.font-bold.text-pink-700.mb-3
              span.inline-block.mr-2
              | è¿½åŠ ã™ã‚‹å†™çœŸã‚’é¸ã‚“ã§ãã ã•ã„

            = f.file_field :images,
                multiple: true,
                accept: "image/*",
                class: "w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-pink-500 file:text-white hover:file:bg-pink-600 file:cursor-pointer transition-all",
                data: { action: "change->spot-image-limit#validateFileCount", spot_image_limit_target: "fileInput"}

            p.text-xs.text-pink-500.mt-2 data-spot-image-limit-target="helpText"
              | â€» è¤‡æ•°æšé¸æŠã§ãã¾ã™

        / å‰Šé™¤ã‚¨ãƒªã‚¢
        .hidden.space-y-3 data-spot-image-limit-target="deleteField"
          .bg-pink-50.rounded-xl.p-4.border-2.border-pink-200
            - if @spot.images.any?
              p.font-bold.text-pink-700.mb-4.text-sm
                span.inline-block.mr-2
                | å‰Šé™¤ã™ã‚‹å†™çœŸã‚’é¸ã‚“ã§ãã ã•ã„

              .space-y-3
                - @spot.images.each do |img|
                  label.flex.items-center.p-3.bg-white.rounded-lg.border-2.border-gray-200.hover:border-pink-300.cursor-pointer.transition-all
                    = check_box_tag "delete_images[]",
                        img.id,
                        false,
                        class: "w-5 h-5 text-pink-500 border-2 border-gray-300 rounded focus:ring-pink-500"

                    = image_tag url_for(img),
                        class: "w-20 h-20 ml-3 rounded-lg object-cover shadow-sm"

            - else
              .text-center.py-6
                p.text-gray-400.text-sm
                  | ğŸ¤·â€â™€ï¸ å‰Šé™¤ã§ãã‚‹å†™çœŸãŒã‚ã‚Šã¾ã›ã‚“

        / ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒªã‚¢
        #image-preview-container.grid.grid-cols-3.gap-2.mt-4

        / é€ä¿¡ãƒœã‚¿ãƒ³
        .pt-4
          = f.submit "ä¿®æ­£ä¾é ¼ã‚’é€ä¿¡ã™ã‚‹",
              class: "w-full bg-gradient-to-r from-pink-400 to-pink-500 hover:from-pink-500 hover:to-pink-600 text-white font-bold py-4 px-6 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 text-base"

    / ãƒ•ãƒƒã‚¿ãƒ¼æ³¨æ„æ›¸ã
    .text-center.mt-6.px-4
      p.text-xs.text-gray-500
        |  é€ä¿¡å¾Œã€é‹å–¶ãŒç¢ºèªã—ã¦ã‹ã‚‰åæ˜ ã•ã‚Œã¾ã™