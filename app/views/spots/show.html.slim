div.page_classes
  h1 class=page_title = t("spots.new.title")

  / 吹き出しメッセージ
  - if flash[:thanks]
    .flex.justify-center.mb-8
      .relative.bg-yellow-100.border.border-yellow-300.rounded-2xl.p-4.shadow-md.max-w-md
        h5.text-lg.font-semibold.mb-2 投稿ありがとうございました！🎉
        p あなたの投稿が他のママパパの役に立ちます✨
        / 吹き出しの三角
        .absolute.left-6.-bottom-3.w-0.h-0.border-l-8.border-r-8.border-t-8.border-l-transparent.border-r-transparent.border-t-yellow-300

  / 店舗情報枠
  .max-w-2xl.mx-auto.border.border-gray-300.rounded-xl.p-6.bg-sky-50.space-y-6
    .space-y-4
      .flex.space-x-4
        .flex-1
          p.font-bold = t('spot.forms.name')
          p = @spot.name
        .flex-1
          p.font-bold = t('spot.forms.tel')
          p = @spot.tel

      .space-y-2
        p.font-bold = t('spot.forms.address')
        p = @spot.address

      .space-y-2
        p.font-bold = t('spot.forms.opening_hours')
        p = @spot.opening_hours

    / 子ども向け設備
    div
      span.text-xl.font-bold.mb-4 = t('spot.forms.child_facilities')
      .grid.grid-cols-2.gap-x-8.gap-y-2.mt-2
        - if @spot.child_chair
          p
            | ✅ 
            = t('spot.forms.child_chair')
        - if @spot.tatami_seat
          p
            | ✅ 
            = t('spot.forms.tatami_seat')
        - if @spot.child_tableware
          p
            | ✅ 
            = t('spot.forms.child_tableware')
        - if @spot.bring_baby_food
          p
            | ✅ 
            = t('spot.forms.bring_baby_food')
        - if @spot.stroller_ok
          p
            | ✅ 
            = t('spot.forms.stroller_ok')
        - if @spot.child_menu
          p
            | ✅ 
            = t('spot.forms.child_menu')
        - if @spot.parking
          p
            | ✅ 
            = t('spot.forms.parking')
        - if @spot.other_facility
          p
            | ✅ 
            = t('spot.forms.other_facility')

      - if @spot.other_facility_comment.present?
        .mt-2
          p.font-bold = t('spot.forms.other_facility_comment')
          p = @spot.other_facility_comment

      / 画像表示
      div.flex.justify-center.mt-4
        - display_all_image_urls(@spot, size: :detail).each do |detail_url|
          - if detail_url.present?
            img src=detail_url class="w-32 h-32 object-cover m-4 cursor-pointer hover:opacity-80 transition-opacity" alt="#{@spot.name}の画像" loading="lazy" onclick="openModal('#{detail_url}')"

        / モーダル部分
        #modal.hidden.fixed.inset-0.bg-black.bg-opacity-50.flex.items-center.justify-center
          img#modalImage.max-h-full.max-w-full.rounded-lg
          button.absolute.top-4.right-4.text-white.text-2xl.font-bold onclick="closeModal()" ×

        script
          | function openModal(src){
          |   document.getElementById('modalImage').src = src;
          |   document.getElementById('modal').classList.remove('hidden');
          | }
          | function closeModal(){
          |   document.getElementById('modal').classList.add('hidden');
          | }

    / 戻る or 編集ボタン
    .mt-6.flex.space-x-4.justify-center
      = link_to t('spot.buttons.new_spot'), new_spot_path, class: "flex-1 bg-teal-500 text-white px-4 py-2 rounded-lg hover:bg-teal-600 text-center"
      = link_to t('spot.buttons.home'), root_path, class: "flex-1 bg-cyan-500 text-white px-4 py-2 rounded-lg hover:bg-cyan-600 text-center"

  / X（Twitter）共有ボタン（アイコンのみ）
  .div.flex.justify-center.mt-4
    = link_to "https://twitter.com/intent/tweet?url=#{CGI.escape(request.url)}&text=#{CGI.escape("子連れで外食？#{@spot.name}の子ども用設備や座敷、ベビーカーOK情報をチェック 🍼")}&hashtags=#{CGI.escape('もぐもぐマップ')}",
              title: "Xでシェア",
              target: "_blank",
              rel: "noopener noreferrer",
              class: "inline-block relative group",
              data: { tooltip: "Xでシェア" } do
      = image_tag "logo-black.png", class: "w-6 h-6 transition-transform duration-200 group-hover:scale-110", alt: "Xロゴ"
      / ツールチップ
      .absolute.bottom-full.left-1/2.transform.-translate-x-1/2.mb-2.px-2.py-1.text-xs.text-white.bg-gray-800.rounded.opacity-0.group-hover:opacity-100.transition-opacity.duration-200.pointer-events-none.whitespace-nowrap
        | Xでシェア
        / 吹き出しの三角形
        .absolute.top-full.left-1/2.transform.-translate-x-1/2.w-0.h-0.border-l-2.border-r-2.border-t-2.border-transparent.border-t-gray-800